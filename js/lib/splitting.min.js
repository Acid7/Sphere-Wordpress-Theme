!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Splitting=t()}(this,(function(){"use strict";var n=document,t=n.createTextNode.bind(n);function e(n,t){return n.appendChild(t)}function r(t,r,o,u){var i=n.createElement("span");return r&&(i.className=r),o&&(i.textContent=o),t&&e(t,i)||i}function o(n,t){return n.getAttribute("data-"+t)}function u(t,e){return t&&0!=t.length?t.nodeName?[t]:[].slice.call(t[0].nodeName?t:(e||n).querySelectorAll(t)):[]}function i(n){for(var t=[];n--;)t[n]=[];return t}function c(n,t){n&&n.some(t)}function s(n){return function(t){return n[t]}}var a={};function l(n,t,e){var r=e.indexOf(n);if(-1==r){e.unshift(n);var o=a[n];if(!o)throw new Error("plugin not loaded: "+n);c(o.depends,(function(t){l(t,n,e)}))}else{var u=e.indexOf(t);e.splice(r,1),e.splice(u,0,n)}return e}function f(n,t,e,r){return{by:n,depends:t,key:e,split:r}}function d(n){return l(n,0,[]).map(s(a))}function p(n){a[n.by]=n}function h(n,o,i,s,a){n.normalize();var l=[],f=document.createDocumentFragment();s&&l.push(n.previousSibling);var d=[];return u(n.childNodes).some((function(n){if(!n.tagName||n.hasChildNodes()){if(n.childNodes&&n.childNodes.length)return d.push(n),void l.push.apply(l,h(n,o,i,s,a));var e=n.wholeText||"",u=e.trim();u.length&&(" "===e[0]&&d.push(t(" ")),c(u.split(i),(function(n,t){t&&a&&d.push(r(f,"whitespace"," "));var e=r(f,o,n);l.push(e),d.push(e)}))," "===e[e.length-1]&&d.push(t(" ")))}else d.push(n)})),c(d,(function(n){e(f,n)})),n.innerHTML="",e(n,f),l}var m="words",g=f(m,0,"word",(function(n){return h(n,"word",/\s+/,0,1)})),v="chars",w=f(v,[m],"char",(function(n,t,e){var r=[];return c(e.words,(function(n,e){r.push.apply(r,h(n,"char","",t.whitespace&&e))})),r}));function y(n){(n=n||{}).key;return u(n.target||"[data-splitting]").map((function(t){var e=t["üçå"];if(!n.force&&e)return e;e=t["üçå"]={el:t};var r=n.by||o(t,"splitting");r&&"true"!=r||(r=v);var u=d(r),i=function(n,t){for(var e in t)n[e]=t[e];return n}({},n);return c(u,(function(n){if(n.split){var r=n.by,o=(n.key,n.split(t,i,e));e[r]=o,t.classList.add(r)}})),t.classList.add("splitting"),e}))}function b(n,t,e){var r=u(t.matching||n.children,n),o={};return c(r,(function(n){var t=Math.round(n[e]);(o[t]||(o[t]=[])).push(n)})),Object.keys(o).map(Number).sort(N).map(s(o))}function N(n,t){return n-t}y.html=function(n){var t=(n=n||{}).target=r();return t.innerHTML=n.content,y(n),t.outerHTML},y.add=p;var x=f("lines",[m],"line",(function(n,t,e){return b(n,{matching:e.words},"offsetTop")})),T=f("items",0,"item",(function(n,t){return u(t.matching||n.children,n)})),L=f("rows",0,"row",(function(n,t){return b(n,t,"offsetTop")})),k=f("cols",0,"col",(function(n,t){return b(n,t,"offsetLeft")})),C=f("grid",["rows","cols"]),M="layout",S=f(M,0,0,(function(n,t){var i=t.rows=+(t.rows||o(n,"rows")||1),c=t.columns=+(t.columns||o(n,"columns")||1);if(t.image=t.image||o(n,"image")||n.currentSrc||n.src,t.image){var s=u("img",n)[0];t.image=s&&(s.currentSrc||s.src)}t.image&&function(n,t,e){n.style.setProperty(t,e)}(n,"background-image","url("+t.image+")");for(var a=i*c,l=[],f=r(0,"cell-grid");a--;){var d=r(f,"cell");r(d,"cell-inner"),l.push(d)}return e(n,f),l})),H=f("cellRows",[M],"row",(function(n,t,e){var r=t.rows,o=i(r);return c(e.layout,(function(n,t,e){o[Math.floor(t/(e.length/r))].push(n)})),o})),O=f("cellColumns",[M],"col",(function(n,t,e){var r=t.columns,o=i(r);return c(e.layout,(function(n,t){o[t%r].push(n)})),o})),j=f("cells",["cellRows","cellColumns"],"cell",(function(n,t,e){return e.layout}));return p(g),p(w),p(x),p(T),p(L),p(k),p(C),p(S),p(H),p(O),p(j),y}));